<app-menu-dashboard></app-menu-dashboard>
<div class="ventana">

  <div class="titulo">Agendar Citas</div>

      <div id="Mis-Datos-C" class="col-sm-12 col-md-6">
          <div id="">
            <div class="form-row">
              <div class="form-group col-md-6">
                <label for="inputNombre">Nombre:</label>
                <input type="text" class="form-control" id="nombre" [(ngModel)]="nombre" [readOnly]="true">
              </div>

              <div class="form-group col-md-6">
                <label for="inputApellido">Apellido:</label>
                <input type="text" class="form-control" id="apellidos" [(ngModel)]="apellidos" [readOnly]="true">
              </div>

              <div class="form-group col-md-6">
                <label for="inputCedula">Cedula:</label>
                <input type="text" class="form-control" id="cedula" [(ngModel)]="cedula" [readOnly]="true">
              </div>

              <div class="form-group col-md-6">
                <label for="inputEmail">Correo:</label>
                <input type="text" class="form-control" id="correo" [(ngModel)]="correo" [readOnly]="true">
              </div>

              <div class="form-group col-md-6">
                <label for="inputTelefono">Telefono:</label>
                <input type="text" class="form-control" id="telefono" [(ngModel)]="telefono" [readOnly]="true">
              </div>

              <div class="form-group col-md-6">
                  <label for="inputProcedimiento">Tratamiento:</label>
                    <select id="inputTratamiento" class="form-control" [(ngModel)]="tratamiento">
                      <option *ngFor="let tratam of tratamientos" [ngValue]="tratam">
                        {{ tratam.nombre }}
                      </option>
                    </select>
                </div>
            </div>

            <div class="form-row">
              <div class="form-group col-md-6">
                <label for="inputFecha">Fecha:</label>
                <input type="date" class="form-control" id="inputFecha" [(ngModel)]="fecha">
              </div>

              <div class="form-group col-md-6">
                <label for="inputHora">Hora:</label>
                <input type="time" class="form-control" id="inputHora" [(ngModel)]="hora">
              </div>
            </div>

            <div class="form-row">
              <div class="form-group col-md-6">
                <label for="inputDepto">Departamento</label>
                <select id="inputDepto" class="form-control" [(ngModel)]="departamento" (change)="cargarCiudades()">
                  <option *ngFor="let item of departamentos" [ngValue]="item">
                    {{ item.nombre }}
                  </option>
                </select>
            </div>

              <div class="form-group col-md-6">
                <label for="inputCiudad">Ciudad</label>
                <select id="inputCiudad" class="form-control" [(ngModel)]="ciudad">
                  <option *ngFor="let item of ciudades" [ngValue]="item">
                    {{ item.nombre }}
                  </option>
                </select>
              </div>

            </div>
            <button type="button" id="confirmarCita" class="btn btn-success" (click)="Guardar()">Agendar Cita</button>
          </div>
        </div>
        
        <div>
          <br>
          <h3>NÃºmero de citas agendadas hoy: {{ numeroDeCitas$ | async }}</h3>


          <br>
        
          <!-- Tabla de citas agendadas -->
          <h3 style="margin-bottom: 10px;">Citas agendadas</h3>
          <table style="width: 100%; border-collapse: collapse; margin-top: 10px;">
            <thead>
              <tr>
                <th style="border: 1px solid #dddddd; text-align: left; padding: 8px;">Ciudad</th>
                <th style="border: 1px solid #dddddd; text-align: left; padding: 8px;">Departamento</th>
                <th style="border: 1px solid #dddddd; text-align: left; padding: 8px;">Cliente</th>
                <th style="border: 1px solid #dddddd; text-align: left; padding: 8px;">Tratamiento</th>
                <th style="border: 1px solid #dddddd; text-align: left; padding: 8px;">Fecha y Hora</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let cita of citas$ | async">
                <td style="border: 1px solid #dddddd; text-align: left; padding: 8px;">{{ cita.id_ciudad.nombre }}</td>
                <td style="border: 1px solid #dddddd; text-align: left; padding: 8px;">{{ cita.id_depto.nombre }}</td>
                <td style="border: 1px solid #dddddd; text-align: left; padding: 8px;">{{ cita.id_usuarioCliente.nombre }}</td>
                <td style="border: 1px solid #dddddd; text-align: left; padding: 8px;">{{ cita.id_tratamiento.nombre }}</td>
                <td style="border: 1px solid #dddddd; text-align: left; padding: 8px;">{{ cita.fechayhora }}</td>
              </tr>
            </tbody>
          </table>
        </div>
  </div>






